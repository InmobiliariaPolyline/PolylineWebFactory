<section class="hero">
   <!-- Video de fondo de toda la sección hero -->
   <div class="hero-bg-video">
     <video autoplay muted loop playsinline class="bg-video">
       <source src="assets/videos/videoprueba4.mp4" type="video/mp4">
     </video>
     <div class="video-overlay"></div>
   </div>

   <div class="hero-container">
     <div class="hero-content">
       <h1>AI Factory: Tecnología que Transforma tu Negocio</h1>
       <p class="hero-subtitle">Descubre el poder de la inteligencia artificial aplicada a tu web. Plantillas profesionales generadas automáticamente con IA, diseño vanguardista y tecnología de vanguardia.</p>
       <div class="hero-cta">
         <a routerLink="/cotizar" class="btn-primary">Crear con IA</a>
         <a routerLink="/plantillas" class="btn-secondary">Ver Plantillas</a>
       </div>
     </div>
     <div class="hero-visual">
       <div class="mockup-container">
         <div class="laptop-mockup">
           <div class="laptop-screen">
             <div class="website-preview">
               <div class="preview-header">
                 <div class="preview-dots">
                   <span></span>
                   <span></span>
                   <span></span>
                 </div>
                 <div class="preview-url">tuempresa-chatbot.com</div>
               </div>
               <div class="preview-content">
                 <!-- Hero Section del sitio web -->
                 <div class="preview-hero">
                   <div class="preview-text">
                     <div class="preview-title" style="height: 32px; background: linear-gradient(135deg, #0ea5e9, #06b6d4); margin-bottom: 12px; width: 90%;"></div>
                     <div class="preview-subtitle" style="height: 16px; background: #64748b; width: 75%; margin-bottom: 20px;"></div>
                     <div class="preview-button" style="height: 20px; background: linear-gradient(135deg, #10b981, #34d399); width: 45%;"></div>
                   </div>
                   <div class="preview-image" style="background: linear-gradient(135deg, #e5e7eb, #f3f4f6); width: 120px; height: 80px; border-radius: 8px; position: relative;">
                     <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40px; height: 30px; background: linear-gradient(135deg, #0ea5e9, #06b6d4); border-radius: 4px;"></div>
                   </div>
                 </div>

                 <!-- Navigation del sitio -->
                 <div class="preview-nav" style="display: flex; gap: 8px; margin-bottom: 16px; padding: 8px 0;">
                   <div style="height: 8px; background: #e5e7eb; border-radius: 4px; flex: 1;"></div>
                   <div style="height: 8px; background: #e5e7eb; border-radius: 4px; flex: 1;"></div>
                   <div style="height: 8px; background: #e5e7eb; border-radius: 4px; flex: 1;"></div>
                   <div style="height: 8px; background: #e5e7eb; border-radius: 4px; flex: 1;"></div>
                 </div>

                 <!-- Servicios destacados -->
                 <div class="preview-services" style="margin-bottom: 16px;">
                   <div style="display: flex; gap: 12px;">
                     <div class="service-card" style="flex: 1; height: 60px; background: linear-gradient(135deg, #f8fafc, #ffffff); border: 1px solid #e2e8f0; border-radius: 8px; position: relative; overflow: hidden;">
                       <div style="position: absolute; top: 8px; left: 8px; width: 44px; height: 44px; background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 6px;"></div>
                       <div style="position: absolute; top: 8px; right: 8px; width: 60%; height: 6px; background: #e5e7eb; border-radius: 3px;"></div>
                       <div style="position: absolute; bottom: 8px; left: 60px; width: 40%; height: 4px; background: #f1f5f9; border-radius: 2px;"></div>
                     </div>
                     <div class="service-card" style="flex: 1; height: 60px; background: linear-gradient(135deg, #f8fafc, #ffffff); border: 1px solid #e2e8f0; border-radius: 8px; position: relative; overflow: hidden;">
                       <div style="position: absolute; top: 8px; left: 8px; width: 44px; height: 44px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 6px;"></div>
                       <div style="position: absolute; top: 8px; right: 8px; width: 55%; height: 6px; background: #e5e7eb; border-radius: 3px;"></div>
                       <div style="position: absolute; bottom: 8px; left: 60px; width: 35%; height: 4px; background: #f1f5f9; border-radius: 2px;"></div>
                     </div>
                   </div>
                 </div>

                 <!-- Chatbot Interface -->
                 <div class="preview-chatbot" style="margin-bottom: 16px; height: 80px; background: linear-gradient(135deg, #f8fafc, #ffffff); border: 1px solid #e2e8f0; border-radius: 8px; position: relative; overflow: hidden;">
                   <div style="position: absolute; top: 8px; left: 8px; width: 32px; height: 32px; background: linear-gradient(135deg, #0ea5e9, #06b6d4); border-radius: 50%;"></div>
                   <div style="position: absolute; top: 8px; left: 48px; width: 70%; height: 6px; background: #e5e7eb; border-radius: 3px;"></div>
                   <div style="position: absolute; top: 18px; left: 48px; width: 50%; height: 6px; background: #f1f5f9; border-radius: 3px;"></div>
                   <div style="position: absolute; bottom: 8px; left: 8px; width: 85%; height: 20px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px;"></div>
                   <div style="position: absolute; bottom: 12px; right: 12px; width: 16px; height: 16px; background: linear-gradient(135deg, #10b981, #34d399); border-radius: 50%;"></div>
                 </div>

                 <!-- Dashboard Preview -->
                 <div class="preview-dashboard" style="display: flex; justify-content: space-between; margin-bottom: 16px;">
                   <div class="dashboard-item" style="flex: 1; height: 40px; background: linear-gradient(135deg, #f8fafc, #ffffff); border: 1px solid #e2e8f0; border-radius: 6px; margin-right: 8px; position: relative;">
                     <div style="position: absolute; top: 8px; left: 8px; width: 24px; height: 24px; background: linear-gradient(135deg, #0ea5e9, #06b6d4); border-radius: 4px;"></div>
                     <div style="position: absolute; top: 8px; right: 8px; width: 40%; height: 4px; background: #e5e7eb; border-radius: 2px;"></div>
                     <div style="position: absolute; bottom: 8px; left: 40px; width: 50%; height: 4px; background: #f1f5f9; border-radius: 2px;"></div>
                   </div>
                   <div class="dashboard-item" style="flex: 1; height: 40px; background: linear-gradient(135deg, #f8fafc, #ffffff); border: 1px solid #e2e8f0; border-radius: 6px; margin-left: 8px; position: relative;">
                     <div style="position: absolute; top: 8px; left: 8px; width: 24px; height: 24px; background: linear-gradient(135deg, #10b981, #34d399); border-radius: 4px;"></div>
                     <div style="position: absolute; top: 8px; right: 8px; width: 35%; height: 4px; background: #e5e7eb; border-radius: 2px;"></div>
                     <div style="position: absolute; bottom: 8px; left: 40px; width: 45%; height: 4px; background: #f1f5f9; border-radius: 2px;"></div>
                   </div>
                 </div>

                 <!-- Contact Form -->
                 <div class="preview-contact" style="display: flex; gap: 12px; align-items: center;">
                   <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #374151, #6b7280); border-radius: 50%;"></div>
                   <div style="flex: 1;">
                     <div style="height: 8px; background: #e5e7eb; border-radius: 4px; margin-bottom: 4px; width: 70%;"></div>
                     <div style="height: 6px; background: #f1f5f9; border-radius: 3px; width: 50%;"></div>
                   </div>
                   <div style="height: 16px; background: linear-gradient(135deg, #10b981, #34d399); border-radius: 6px; width: 60px;"></div>
                 </div>
               </div>
             </div>
           </div>
         </div>
       </div>
     </div>
   </div>
 </section>

 <!-- Video Presentation Section -->
 <section class="video-presentation">
   <div class="container">
     <div class="section-header">
       <h2>Experiencia AIFactory</h2>
       <p>Descubre cómo la IA revoluciona la creación de websites profesionales</p>
     </div>

     <div class="video-container">
       <div class="video-wrapper">
         <video #presentationVideo class="presentation-video"
                poster="assets/video-poster.jpg"
                preload="metadata"
                (play)="onVideoPlay()"
                (pause)="onVideoPause()"
                (ended)="onVideoEnded()"
                (timeupdate)="onTimeUpdate()"
                (loadedmetadata)="onVideoLoaded()">
           <source src="assets/presentation-video.mp4" type="video/mp4">
           Tu navegador no soporta el elemento de video.
         </video>

         <div class="video-overlay" [class.hidden]="isPlaying">
           <div class="play-button" (click)="playVideo()">
             <div class="play-icon" [class.playing]="isPlaying">
               <svg viewBox="0 0 24 24" fill="currentColor">
                 <path d="M8 5v14l11-7z"/>
               </svg>
             </div>
           </div>
           <div class="video-info">
             <h3>IA Factory en Acción</h3>
             <p>Ve cómo creamos websites profesionales con inteligencia artificial</p>
           </div>
         </div>

         <div class="video-controls" [class.visible]="isPlaying">
           <div class="progress-bar" (click)="seekTo($event)">
             <div class="progress" [style.width.%]="progress"></div>
             <div class="progress-handle"></div>
           </div>
           <div class="controls-row">
             <button class="control-btn play-pause" (click)="togglePlayPause()">
               <svg *ngIf="!isPlaying" viewBox="0 0 24 24" fill="currentColor">
                 <path d="M8 5v14l11-7z"/>
               </svg>
               <svg *ngIf="isPlaying" viewBox="0 0 24 24" fill="currentColor">
                 <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
               </svg>
             </button>
             <div class="time-display">{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</div>
             <div class="volume-control">
               <button class="control-btn volume-btn" (click)="toggleMute()">
                 <svg *ngIf="!isMuted" viewBox="0 0 24 24" fill="currentColor">
                   <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                 </svg>
                 <svg *ngIf="isMuted" viewBox="0 0 24 24" fill="currentColor">
                   <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                 </svg>
               </button>
               <input type="range" class="volume-slider" min="0" max="100" step="1" [value]="volume" (input)="setVolume($event)">
             </div>
           </div>
         </div>
       </div>
     </div>
   </div>
 </section>

<!-- Templates Section - Now Featured First -->
<section class="templates featured">
  <div class="container">
    <div class="section-header">
      <h2>Plantillas Profesionales Listas para Usar</h2>
      <p>Elige entre nuestras plantillas diseñadas por expertos y personalízalas según tus necesidades</p>
    </div>
    
    <!-- Carousel Container -->
    <div class="carousel-container" 
         (mouseenter)="onMouseEnter()" 
         (mouseleave)="onMouseLeave()">
      
      <!-- Botón Anterior -->
      <button class="carousel-btn prev" 
              (click)="prevSlide()"
              [disabled]="isTransitioning"
              aria-label="Anterior">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>di
      </button>

      <!-- Templates Track -->
      <div class="carousel-track">
        <div class="templates-grid" 
             [style.transform]="transformValue">
          
          <div class="template-card" *ngFor="let template of extendedTemplates; let i = index">
            <div class="template-preview">
              <div class="template-mockup">
                <div class="mockup-header">
                  <div class="mockup-dots"></div>
                </div>
                
                <!-- Screenshot personalizada -->
                <div class="mockup-screenshot" *ngIf="template.previewImage">
                  <img [src]="'templates/' + template.previewImage" 
                       [alt]="template.name + ' preview'"
                       loading="lazy">
                </div>
                
                <!-- Fallback a bloques de color si no hay imagen -->
                <div class="mockup-content" *ngIf="!template.previewImage">
                  <div class="content-block primary"></div>
                  <div class="content-row">
                    <div class="content-block secondary"></div>
                    <div class="content-block secondary"></div>
                  </div>
                  <div class="content-block tertiary"></div>
                </div>
              </div>
              <div class="template-category">{{ template.category }}</div>
              
              <!-- Overlay on Hover -->
              <div class="overlay">
                <button class="btn-preview" (click)="openTemplatePreview(template)">
                  Vista Rápida
                </button>
              </div>
            </div>
            
            <div class="template-info">
              <h3>{{ template.name }}</h3>
            </div>
          </div>
          
        </div>
      </div>

      <!-- Botón Siguiente -->
      <button class="carousel-btn next" 
              (click)="nextSlide()"
              [disabled]="isTransitioning"
              aria-label="Siguiente">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>

      <!-- Indicadores -->
      <div class="carousel-indicators">
        <button *ngFor="let slide of [].constructor(totalSlides); let i = index"
                class="indicator"
                [class.active]="currentSlide === i"
                (click)="goToSlide(i)"
                [attr.aria-label]="'Ir a diapositiva ' + (i + 1)">
        </button>
      </div>

    </div>
    
    <div class="templates-cta">
      <a routerLink="/plantillas" class="btn-secondary">Ver todas las plantillas</a>
    </div>
  </div>
</section>



<section class="benefits">
   <!-- Video de fondo de toda la sección -->
   <div class="benefits-bg-video">
     <video autoplay muted loop playsinline class="bg-video">
       <source src="assets/videos/3129576-uhd_3840_2160_30fps.mp4" type="video/mp4">
     </video>
     <div class="video-overlay"></div>
   </div>

   <div class="container">
     <div class="section-header">
       <h2>Potencia tu Negocio con IA</h2>
       <p>Descubre por qué AIFactory es la revolución en desarrollo web</p>
     </div>

     <div class="benefits-grid">
       <div class="benefit-item" *ngFor="let benefit of benefits; let i = index">
         <div class="benefit-icon">{{ benefit.icon }}</div>
         <h3>{{ benefit.title }}</h3>
         <p>{{ benefit.desc }}</p>
         <div class="benefit-bg-pattern" [style.animation-delay.ms]="i * 200"></div>
         <!-- Imagen de fondo tecnológica -->
         <div class="benefit-bg-image" [style.background-image]="'url(assets/imagenes/pexels-googledeepmind-' + (17485678 + i) + '.jpg)'"></div>
       </div>
     </div>

     <!-- Elementos visuales tecnológicos -->
     <div class="tech-elements">
       <div class="floating-circuit" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
       <div class="floating-circuit" style="top: 20%; right: 10%; animation-delay: 1s;"></div>
       <div class="floating-circuit" style="bottom: 15%; left: 15%; animation-delay: 2s;"></div>
       <div class="floating-circuit" style="bottom: 25%; right: 5%; animation-delay: 0.5s;"></div>
       <div class="ai-particle" style="top: 30%; left: 20%; animation-delay: 1.5s;"></div>
       <div class="ai-particle" style="top: 60%; right: 20%; animation-delay: 2.5s;"></div>
       <div class="ai-particle" style="bottom: 40%; left: 70%; animation-delay: 3s;"></div>
     </div>
   </div>
 </section>

<section class="process">
  <div class="container">
    <div class="section-header">
      <h2>Cómo Funciona</h2>
    </div>
    
    <div class="process-steps">
      <div class="step" *ngFor="let step of processSteps; let i = index">
        <div class="step-number">{{ i + 1 }}</div>
        <h3>{{ step.title }}</h3>
        <p>{{ step.desc }}</p>
      </div>
    </div>
  </div>
</section>


<section class="testimonials">
  <div class="container">
    <div class="section-header">
      <h2>Testimonios</h2>
    </div>
    
    <div class="testimonials-grid">
      <div class="testimonial-card" *ngFor="let testimonial of testimonials">
        <div class="testimonial-content">
          <p>"{{ testimonial.text }}"</p>
        </div>
        <div class="testimonial-author">
          <strong>{{ testimonial.author }}</strong>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="stats">
   <div class="stats-grid">
     <div class="stat" *ngFor="let stat of stats; let i = index">
       <div class="stat-number" [style.animation-delay.ms]="i * 200">{{ stat.number }}</div>
       <div class="stat-label">{{ stat.label }}</div>
       <div class="stat-glow" [style.animation-delay.ms]="i * 200 + 1000"></div>
     </div>
   </div>
 </section>

<section class="final-cta">
   <div class="cta-content">
     <h2>¿Listo para revolucionar tu presencia digital?</h2>
     <p class="muted">Únete a las empresas del futuro que ya confían en la IA de AIFactory</p>
     <div class="cta-buttons">
       <a routerLink="/cotizar" class="btn-lg">Crear con IA - Gratis</a>
       <a routerLink="/plantillas" class="btn-lg alt">Ver ejemplos reales</a>
     </div>
   </div>
 </section>

<!-- Template Preview Modal -->
<div class="template-modal" [class.active]="isModalOpen" (click)="closeModal($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ selectedTemplate?.name }}</h3>
      <button class="close-btn" (click)="closeModal()">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="view-controls">
        <button class="view-btn" [class.active]="currentView === 'desktop'" (click)="setView('desktop')">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z"/>
          </svg>
          Escritorio
        </button>
        <button class="view-btn" [class.active]="currentView === 'mobile'" (click)="setView('mobile')">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
          </svg>
          Móvil
        </button>
      </div>
      
      <div class="preview-container" [class.mobile-view]="currentView === 'mobile'">
        <ng-template #previewHost></ng-template>
      </div>
      
      <div class="modal-footer">
        <div class="template-info-modal">
          <h4>{{ selectedTemplate?.name }}</h4>
          <p>{{ selectedTemplate?.desc }}</p>
          <div class="template-features-modal">
            <span class="feature-tag" *ngFor="let feature of selectedTemplate?.features">{{ feature }}</span>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-modal secondary" (click)="closeModal()">Cerrar</button>
          <button class="btn-modal tertiary" (click)="viewFullDemo()">Ver demo completa</button>
          <a routerLink="/cotizar" class="btn-modal primary" (click)="closeModal()">Usar esta plantilla</a>
        </div>
      </div>
    </div>
  </div>
</div>
