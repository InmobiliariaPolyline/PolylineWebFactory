<section class="hero">
  <div class="hero-container">
    <div class="hero-content">
      <h1>Plantillas Profesionales para tu Web</h1>
      <p class="hero-subtitle">Elige entre nuestras plantillas diseñadas por expertos y crea tu sitio web profesional en minutos, sin complicaciones.</p>
      <div class="hero-cta">
        <a routerLink="/cotizar" class="btn-primary">Ver Plantillas</a>
        <a routerLink="/plantillas" class="btn-secondary">Explorar Todas</a>
      </div>
    </div>
    <div class="hero-visual">
      <div class="mockup-container">
        <div class="laptop-mockup">
          <div class="laptop-screen">
            <div class="website-preview">
              <div class="preview-header">
                <div class="preview-dots">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
                <div class="preview-url">miempresa.com</div>
              </div>
              <div class="preview-content">
                <div class="preview-hero">
                  <div class="preview-text">
                    <div class="preview-title"></div>
                    <div class="preview-subtitle"></div>
                    <div class="preview-button"></div>
                  </div>
                  <div class="preview-image"></div>
                </div>
                <div class="preview-features">
                  <div class="feature-card"></div>
                  <div class="feature-card"></div>
                  <div class="feature-card"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Templates Section - Now Featured First -->
<section class="templates featured">
  <div class="container">
    <div class="section-header">
      <h2>Plantillas Profesionales Listas para Usar</h2>
      <p>Elige entre nuestras plantillas diseñadas por expertos y personalízalas según tus necesidades</p>
    </div>
    
    <!-- Carousel Container -->
    <div class="carousel-container" 
         (mouseenter)="onMouseEnter()" 
         (mouseleave)="onMouseLeave()">
      
      <!-- Botón Anterior -->
      <button class="carousel-btn prev" 
              (click)="prevSlide()"
              [disabled]="isTransitioning"
              aria-label="Anterior">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>

      <!-- Templates Track -->
      <div class="carousel-track">
        <div class="templates-grid" 
             [style.transform]="transformValue">
          
          <div class="template-card" *ngFor="let template of extendedTemplates; let i = index">
            <div class="template-preview">
              <div class="template-mockup">
                <div class="mockup-header">
                  <div class="mockup-dots"></div>
                </div>
                
                <!-- Screenshot personalizada -->
                <div class="mockup-screenshot" *ngIf="template.previewImage">
                  <img [src]="'templates/' + template.previewImage" 
                       [alt]="template.name + ' preview'"
                       loading="lazy">
                </div>
                
                <!-- Fallback a bloques de color si no hay imagen -->
                <div class="mockup-content" *ngIf="!template.previewImage">
                  <div class="content-block primary"></div>
                  <div class="content-row">
                    <div class="content-block secondary"></div>
                    <div class="content-block secondary"></div>
                  </div>
                  <div class="content-block tertiary"></div>
                </div>
              </div>
              <div class="template-category">{{ template.category }}</div>
              
              <!-- Overlay on Hover -->
              <div class="overlay">
                <button class="btn-preview" (click)="openTemplatePreview(template)">
                  Vista Rápida
                </button>
              </div>
            </div>
            
            <div class="template-info">
              <h3>{{ template.name }}</h3>
            </div>
          </div>
          
        </div>
      </div>

      <!-- Botón Siguiente -->
      <button class="carousel-btn next" 
              (click)="nextSlide()"
              [disabled]="isTransitioning"
              aria-label="Siguiente">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>

      <!-- Indicadores -->
      <div class="carousel-indicators">
        <button *ngFor="let slide of [].constructor(totalSlides); let i = index"
                class="indicator"
                [class.active]="currentSlide === i"
                (click)="goToSlide(i)"
                [attr.aria-label]="'Ir a diapositiva ' + (i + 1)">
        </button>
      </div>

    </div>
    
    <div class="templates-cta">
      <a routerLink="/plantillas" class="btn-secondary">Ver todas las plantillas</a>
    </div>
  </div>
</section>



<section class="benefits">
  <div class="container">
    <div class="section-header">
      <h2>Beneficios Clave</h2>
      <p>Descubre por qué POLYLINE es la elección ideal para tu proyecto online</p>
    </div>
    
    <div class="benefits-grid">
      <div class="benefit-item" *ngFor="let benefit of benefits">
        <div class="benefit-icon">{{ benefit.icon }}</div>
        <h3>{{ benefit.title }}</h3>
        <p>{{ benefit.desc }}</p>
      </div>
    </div>
  </div>
</section>

<section class="process">
  <div class="container">
    <div class="section-header">
      <h2>Cómo Funciona</h2>
    </div>
    
    <div class="process-steps">
      <div class="step" *ngFor="let step of processSteps; let i = index">
        <div class="step-number">{{ i + 1 }}</div>
        <h3>{{ step.title }}</h3>
        <p>{{ step.desc }}</p>
      </div>
    </div>
  </div>
</section>


<section class="testimonials">
  <div class="container">
    <div class="section-header">
      <h2>Testimonios</h2>
    </div>
    
    <div class="testimonials-grid">
      <div class="testimonial-card" *ngFor="let testimonial of testimonials">
        <div class="testimonial-content">
          <p>"{{ testimonial.text }}"</p>
        </div>
        <div class="testimonial-author">
          <strong>{{ testimonial.author }}</strong>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="stats">
  <div class="stats-grid">
    <div class="stat" *ngFor="let stat of stats">
      <div class="stat-number">{{ stat.number }}</div>
      <div class="stat-label">{{ stat.label }}</div>
    </div>
  </div>
</section>

<section class="final-cta">
  <div class="cta-content">
    <h2>¿Listo para tener tu web automáticamente?</h2>
    <p class="muted">Únete a cientos de empresas que ya confían en nuestra tecnología</p>
    <div class="cta-buttons">
      <a routerLink="/cotizar" class="btn-lg">Comenzar ahora - Gratis</a>
      <a routerLink="/plantillas" class="btn-lg alt">Ver ejemplos reales</a>
    </div>
  </div>
</section>

<!-- Template Preview Modal -->
<div class="template-modal" [class.active]="isModalOpen" (click)="closeModal($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ selectedTemplate?.name }}</h3>
      <button class="close-btn" (click)="closeModal()">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="view-controls">
        <button class="view-btn" [class.active]="currentView === 'desktop'" (click)="setView('desktop')">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z"/>
          </svg>
          Escritorio
        </button>
        <button class="view-btn" [class.active]="currentView === 'mobile'" (click)="setView('mobile')">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
          </svg>
          Móvil
        </button>
      </div>
      
      <div class="preview-container" [class.mobile-view]="currentView === 'mobile'">
        <ng-template #previewHost></ng-template>
      </div>
      
      <div class="modal-footer">
        <div class="template-info-modal">
          <h4>{{ selectedTemplate?.name }}</h4>
          <p>{{ selectedTemplate?.desc }}</p>
          <div class="template-features-modal">
            <span class="feature-tag" *ngFor="let feature of selectedTemplate?.features">{{ feature }}</span>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-modal secondary" (click)="closeModal()">Cerrar</button>
          <button class="btn-modal tertiary" (click)="viewFullDemo()">Ver demo completa</button>
          <a routerLink="/cotizar" class="btn-modal primary" (click)="closeModal()">Usar esta plantilla</a>
        </div>
      </div>
    </div>
  </div>
</div>
